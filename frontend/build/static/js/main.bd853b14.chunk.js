(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),c=n(33),a=n.n(c),o=(n(39),n(10)),i=n(11),l=n(13),u=n(12),j=(n.p,n(40),n(9)),h=n.n(j),d=n(24),b=n(0),p=function(e){var t=e.user;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.username}),Object(b.jsx)("td",{children:t.first_name}),Object(b.jsx)("td",{children:t.last_name}),Object(b.jsx)("td",{children:t.email})]})},O=function(e){var t=e.users;return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"Username"}),Object(b.jsx)("th",{children:"First name"}),Object(b.jsx)("th",{children:"Last name"}),Object(b.jsx)("th",{children:"Email"}),t.map((function(e){return Object(b.jsx)(p,{user:e})}))]})},f=n(8),x=function(e){var t=e.menu_item;return Object(b.jsx)("div",{children:Object(b.jsxs)(f.b,{to:t.link,children:[" ",t.name," "]})})},m=function(e){var t=e.all_menu_items;return Object(b.jsx)("div",{class:"header",children:t.map((function(e){return Object(b.jsx)(x,{menu_item:e})}))})},v=function(e){var t=e.footer_texts;return Object(b.jsxs)("div",{class:"footer",children:[Object(b.jsxs)("div",{children:["Adress: ",t.adress]}),Object(b.jsxs)("div",{children:["Phone: ",t.phone]}),Object(b.jsxs)("div",{children:["Other: ",t.other]})]})},g=function(e){var t=e.project,n=e.deleteProject;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(f.b,{to:"/project/".concat(t.id),children:t.name})}),Object(b.jsx)("td",{children:t.link}),Object(b.jsx)("td",{children:t.users.map((function(e){return Object(b.jsxs)("span",{children:[" ",e," ",Object(b.jsx)("br",{})," "]})}))}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{type:"button",children:Object(b.jsx)(f.b,{to:"/project/update/".concat(t.id),children:"Update"})})}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},_=function(e){var t=e.load_filtered_projects;return Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{defaultValue:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"}),Object(b.jsx)("button",{onClick:function(){return t(k())},children:"Search"})]})},k=function(){return document.querySelector("input").value},y=function(e){var t=e.projects,n=e.deleteProject,s=e.load_filtered_projects;return Object(b.jsxs)("div",{children:[Object(b.jsx)(f.b,{to:"/projects/create",children:"Create project"}),Object(b.jsx)(_,{load_filtered_projects:s}),Object(b.jsx)("br",{}),Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"Name"}),Object(b.jsx)("th",{children:"Link"}),Object(b.jsx)("th",{children:"Users"}),Object(b.jsx)("th",{children:"Update"}),Object(b.jsx)("th",{children:"Delete"}),t.map((function(e){return Object(b.jsx)(g,{project:e,deleteProject:n})}))]})]})},C=function(e){var t=e.todo,n=e.deleteTodo;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.user}),Object(b.jsx)("td",{children:t.project}),Object(b.jsx)("td",{children:t.text}),Object(b.jsx)("td",{children:1==t.is_open?"Open":"Closed"}),Object(b.jsx)("td",{children:t.created_at}),Object(b.jsx)("td",{children:t.updated_at}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},S=function(e){var t=e.todos,n=e.deleteTodo;return Object(b.jsxs)("div",{children:[Object(b.jsx)(f.b,{to:"/todos/create",children:"Create ToDo"}),Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"User"}),Object(b.jsx)("th",{children:"Project"}),Object(b.jsx)("th",{children:"Text"}),Object(b.jsx)("th",{children:"Is open"}),Object(b.jsx)("th",{children:"Created"}),Object(b.jsx)("th",{children:"Updated"}),Object(b.jsx)("th",{children:"Delete"}),t.map((function(e){return Object(b.jsx)(C,{todo:e,deleteTodo:n})}))]})]})},N=function(){return Object(b.jsx)("div",{class:"NF404",children:"NOT FOUND 404"})},P=n(2),T=function(e){var t=e.todo;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.user}),Object(b.jsx)("td",{children:t.project}),Object(b.jsx)("td",{children:t.text}),Object(b.jsx)("td",{children:1==t.is_open?"Open":"Closed"}),Object(b.jsx)("td",{children:t.created_at}),Object(b.jsx)("td",{children:t.updated_at})]})},U=function(e){var t=e.todos,n=Object(P.g)().id,s=t.filter((function(e){return e.project==parseInt(n)}));return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"User"}),Object(b.jsx)("th",{children:"Project"}),Object(b.jsx)("th",{children:"Text"}),Object(b.jsx)("th",{children:"Is open"}),Object(b.jsx)("th",{children:"Created"}),Object(b.jsx)("th",{children:"Updated"}),s.map((function(e){return Object(b.jsx)(T,{todo:e})}))]})},w=n(14),D=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={login:"",password:""},s}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.get_token(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(r.a.Component),L=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={name:"",link:"",users:[]},s}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleProjectChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.link,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"login",children:"Name"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"link",children:"Link"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"link",value:this.state.link,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"users",children:"Users"}),Object(b.jsx)("select",{multiple:!0,type:"number",className:"form-control",name:"users",value:this.state.users,onChange:function(t){return e.handleProjectChange(t)},children:this.props.all_users.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(b.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(r.a.Component),F=Object(P.h)(L),I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={user:"",project:"",text:""},s}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleTodoChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.createTodo(this.state.user,this.state.project,this.state.text),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"user",children:"User"}),Object(b.jsx)("select",{type:"number",className:"form-control",name:"user",value:this.state.user,onChange:function(t){return e.handleChange(t)},children:this.props.all_users.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"project",children:"Project"}),Object(b.jsx)("select",{type:"number",className:"form-control",name:"project",value:this.state.project,onChange:function(t){return e.handleChange(t)},children:this.props.all_projects.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.name})}))})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"text",children:"Text"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"text",value:this.state.text,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(r.a.Component),E=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;Object(o.a)(this,n);var r=(s=t.call(this,e)).props.match.params.id;console.log(r);var c=s.props.all_projects.filter((function(e){return e.id==parseInt(r)}));return s.state={name:c[0].name,link:c[0].link,users:c[0].users},s}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleProjectChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.updateProject(this.props.match.params.id,this.state.name,this.state.link,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"login",children:"Name"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"link",children:"Link"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"link",value:this.state.link,onChange:function(t){return e.handleChange(t)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"users",children:"Users"}),Object(b.jsx)("select",{multiple:!0,type:"number",className:"form-control",name:"users",value:this.state.users,onChange:function(t){return e.handleProjectChange(t)},children:this.props.all_users.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(b.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Update"})]})}}]),n}(r.a.Component),R=Object(P.h)(E),A=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={users:[],menu_elements:[],footer_texts:[],projects:[],todos:[],token:"",active_user_name:""},s}return Object(i.a)(n,[{key:"deleteTodo",value:function(e){var t=this,n=this.get_headers();h.a.delete("http://127.0.0.1:8000/api/todos/".concat(e),{headers:n}).then((function(e){t.load_data()})).catch((function(e){console.log(e)}))}},{key:"createTodo",value:function(e,t,n){var s=this,r=this.get_headers(),c={user:e,project:t,text:n};h.a.post("http://127.0.0.1:8000/api/todos/",c,{headers:r}).then((function(e){s.load_data()})).catch((function(e){console.log(e)}))}},{key:"deleteProject",value:function(e){var t=this,n=this.get_headers();h.a.delete("http://127.0.0.1:8000/api/projects/".concat(e),{headers:n}).then((function(e){t.load_data()})).catch((function(e){console.log(e)}))}},{key:"createProject",value:function(e,t,n){var s=this,r=this.get_headers(),c={name:e,link:t,users:n};h.a.post("http://127.0.0.1:8000/api/projects/",c,{headers:r}).then((function(e){s.load_data()})).catch((function(e){console.log(e)}))}},{key:"updateProject",value:function(e,t,n,s){var r=this,c=this.get_headers(),a={name:t,link:n,users:s};h.a.put("http://127.0.0.1:8000/api/projects/".concat(e,"/"),a,{headers:c}).then((function(e){r.load_data()})).catch((function(e){console.log(e)}))}},{key:"logout",value:function(){this.set_token("")}},{key:"is_auth",value:function(){return!!this.state.token}},{key:"set_token",value:function(e){var t=this;(new d.a).set("token",e),this.setState({token:e},(function(){return t.load_data()}))}},{key:"get_token",value:function(e,t){var n=this;h.a.post("http://127.0.0.1:8000/api-token-auth/",{username:e,password:t}).then((function(t){n.set_token(t.data.token),n.setState({active_user_name:e})})).catch((function(e){return console.log("ERROR"+e)}))}},{key:"load_filtered_projects",value:function(e){var t=this,n=this.get_headers();h.a.get("http://127.0.0.1:8000/api/projects/",{params:{name:e}},{headers:n}).then((function(e){var n=e.data;t.setState({projects:n})})).catch((function(e){console.log(e),t.setState({projects:[]})}))}},{key:"load_data",value:function(){var e=this,t=this.get_headers(),n={adress:"some.st",phone:"Phone_num",other:"some_additional_description"},s=[{name:"Users",link:"/"},{name:"Projects",link:"/projects"},{name:"ToDo's",link:"/todos"}];h.a.get("http://127.0.0.1:8000/api/users/",{headers:t}).then((function(t){var r=t.data;e.setState({users:r,menu_elements:s,footer_texts:n})})).catch((function(t){console.log(t),e.setState({users:[]})})),h.a.get("http://127.0.0.1:8000/api/projects/",{headers:t}).then((function(t){var n=t.data;e.setState({projects:n})})).catch((function(t){console.log(t),e.setState({projects:[]})})),h.a.get("http://127.0.0.1:8000/api/todos/",{headers:t}).then((function(t){var n=t.data;e.setState({todos:n})})).catch((function(t){console.log(t),e.setState({todos:[]})}))}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json"};return this.is_auth()&&(e.Authorization="Token "+this.state.token),e}},{key:"get_token_from_storage",value:function(){var e=this,t=(new d.a).get("token");this.setState({token:t},(function(){return e.load_data()}))}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"render",value:function(){var e=this;return Object(b.jsx)("div",{class:"main_window",children:Object(b.jsxs)(f.a,{children:[Object(b.jsx)("div",{children:Object(b.jsx)(m,{all_menu_items:this.state.menu_elements})}),Object(b.jsxs)("div",{class:"login_menu",children:[this.is_auth()?Object(b.jsxs)("span",{children:[this.state.active_user_name," "]}):Object(b.jsx)("span",{}),this.is_auth()?Object(b.jsx)("a",{onClick:function(){return e.logout()},children:"Logout"}):Object(b.jsx)(f.b,{to:"/login",children:" Login "})]}),Object(b.jsx)("div",{children:Object(b.jsxs)(P.d,{children:[Object(b.jsx)(P.b,{exact:!0,path:"/",component:function(){return Object(b.jsx)(O,{users:e.state.users})}}),Object(b.jsx)(P.b,{exact:!0,path:"/projects/create",component:function(){return Object(b.jsx)(F,{createProject:function(t,n,s){return e.createProject(t,n,s)},all_users:e.state.users})}}),Object(b.jsx)(P.b,{exact:!0,path:"/projects",component:function(){return Object(b.jsx)(y,{projects:e.state.projects,deleteProject:function(t){return e.deleteProject(t)},load_filtered_projects:function(t){return e.load_filtered_projects(t)}})}}),Object(b.jsx)(P.b,{path:"/project/update/:id",children:Object(b.jsx)(R,{updateProject:function(t,n,s,r){e.updateProject(t,n,s,r)},all_users:this.state.users,all_projects:this.state.projects})}),Object(b.jsx)(P.b,{exact:!0,path:"/todos",component:function(){return Object(b.jsx)(S,{todos:e.state.todos,deleteTodo:function(t){return e.deleteTodo(t)}})}}),Object(b.jsx)(P.b,{exact:!0,path:"/todos/create",component:function(){return Object(b.jsx)(I,{createTodo:function(t,n,s){return e.createTodo(t,n,s)},all_projects:e.state.projects,all_users:e.state.users})}}),Object(b.jsx)(P.b,{exact:!0,path:"/login",component:function(){return Object(b.jsx)(D,{get_token:function(t,n){return e.get_token(t,n)}})}}),Object(b.jsx)(P.b,{path:"/project/:id",children:Object(b.jsx)(U,{todos:this.state.todos})}),Object(b.jsx)(P.a,{from:"/users",to:"/"}),Object(b.jsx)(P.b,{component:N})]})}),Object(b.jsx)(v,{footer_texts:this.state.footer_texts})]})})}}]),n}(r.a.Component),B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),c(e),a(e)}))};a.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(A,{})}),document.getElementById("root")),B()}},[[68,1,2]]]);
//# sourceMappingURL=main.bd853b14.chunk.js.map